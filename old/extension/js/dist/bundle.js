(()=>{"use strict";function e(e){const t=document.createElement("div");e.container.appendChild(t),t.className="flex grow flex-row";for(let n=0;n<e.tags.length;n++){const o=document.createElement("div");t.appendChild(o),o.textContent=e.tags[n],o.className="px-2 mx-1 rounded-full",o.style.backgroundColor=e.tagColors[n]}}const t={tags:{start:"(",end:")",separator:";",colorSeparator:"|"},folder:{start:"[",end:"]",separator:";"}};function n(e){let n=e.split(t.folder.start);if(2!=n.length)return[];let o=n[1].split(t.folder.end);return 2!=o.length?[]:o[0].split(t.folder.separator)}function o(e){const o=e.children[0],s=o.children[0],r=s.children[0],l=s.children[1],a=r.children[0].children[0].children[0];l.remove(),e.remove();const c=function(e){let n=e.split(t.tags.start);if(2!=n.length)return{colors:[],tags:[]};let o=n[1].split(t.tags.end);if(2!=o.length)return{colors:[],tags:[]};const s=o[0].split(t.tags.separator);return{colors:function(e){const n=[];for(let o=0;o<e.length;o++){const s=e[o].split(t.tags.colorSeparator);2==s.length?(n.push(s[1]),e[o]=s[0]):n.push("")}return n}(s),tags:s}}(a.value);return{inputValue:a.value,inputElement:a,expandArrow:l,firstDiv:o,container:s,element:e,tags:c.tags,tagColors:c.colors,folder:n(a.value)}}function s(e,t){const n=e.indexOf(t);return n<0?e:e.splice(n,1)}function r(e){const n=document.createElement("button");e.container.appendChild(n),n.textContent="⚙",n.className="active:animate-spin",n.onclick=()=>{o.hidden=!o.hidden};const o=function(e,n){const o=document.createElement("div");o.hidden=!0,o.className="border-t-[1px] p-6 pb-5";const s=document.createElement("span");o.appendChild(s),s.textContent="Please append this to the accounts name: ";const r=document.createElement("span");o.appendChild(r),r.textContent="";let a="",c="";return o.appendChild(l("Folder:",(function(e){a=0==e.length?"":t.folder.start+e+t.folder.end,r.textContent=a+c}),t.folder.separator,e)),o.appendChild(l(`Tags (add colors by adding a "${t.tags.colorSeparator}" after the tag and then the color):`,(function(e){c=0==e.length?"":t.tags.start+e+t.tags.end,r.textContent=a+c}),t.tags.separator,n)),o}(e.folder,e.tags);return e.firstDiv.appendChild(o),e}function l(e,t,n,o){const s=document.createElement("div");s.className="flex flex-row pb-1";const r=document.createElement("div");s.appendChild(r),r.textContent=e,r.className="p-1";const l=document.createElement("div");s.appendChild(l),l.className="flex flex-row";const c=document.createElement("button");s.appendChild(c),c.textContent="➕",c.className="pl-2 py-1";const d=[],i=[];c.onclick=()=>{a(l,d,i,t,n,"")};for(const e of o)a(l,d,i,t,n,e);return s}function a(e,t,n,o,r,l){const a=document.createElement("div");e.appendChild(a),t.push(a),a.className="ml-2 bg-neutral-200 rounded-md p-1";const c=document.createElement("button");a.appendChild(c),c.textContent="❌";const d=document.createElement("input");function i(){let e="";return n.forEach((t=>{e+=t.value+r})),e=e.substring(0,e.length-1),e}a.appendChild(d),n.push(d),d.value=l,d.className="w-20 ml-2 bg-transparent",d.oninput=()=>{o(i())},c.onclick=()=>{a.remove(),s(t,a),s(n,d),o(i())}}class c{listParent;entries;folder;constructor(e,t){this.listParent=e,this.entries=t,this.folder={entries:[],subFolders:new Map},this.sortEntries();for(const e of this.folder.subFolders)this.addFolders(e[1],e[0],this.listParent);for(const e of this.folder.entries)this.listParent.appendChild(e.element)}sortEntries(){for(const e of this.entries){if(0==e.folder.length){this.folder.entries.push(e);continue}let t=this.folder;for(const n of e.folder){const o=t.subFolders.get(n);if(void 0!==o)o.entries.push(e),t=o;else{const o={entries:[e],subFolders:new Map};t.subFolders.set(n,o),t=o}}}}addFolders(e,t,n){const o=document.createElement("li");n.appendChild(o),o.className="pt-6";const s=document.createElement("div");o.appendChild(s);const r=document.createElement("div");s.appendChild(r),r.className="p-2 flex flex-row";const l=document.createElement("button");r.appendChild(l),l.textContent="➕",l.onclick=()=>{c.hidden=!c.hidden,l.textContent=c.hidden?"➕":"➖"},l.className="w-6";const a=document.createElement("div");r.appendChild(a),a.textContent=t;const c=document.createElement("div");s.appendChild(c),c.hidden=!0,c.className="";const d=document.createElement("ul");c.appendChild(d),d.className="border-l-2 pl-2 ml-7";for(const t of e.entries)d.appendChild(t.element);for(const t of e.subFolders)this.addFolders(t[1],t[0],d)}}const d=setTimeout((()=>{!function(t){const n=function(){const e=document.getElementsByTagName("ul");for(const t of e){const e=t.children,n=[];for(const t of e)"LI"===t.tagName&&t.id.endsWith("mozmail.com")&&"AliasList_alias-card-wrapper__a_ZUO"===t.className&&n.push(t);if(n.length>0)return{children:n,parent:t}}return null}();if(null===n)return!1;clearTimeout(t);const s=[];for(const e of n.children)s.push(o(e));new c(n.parent,s);for(const t of s)e(t),r(t),(l=t).container.appendChild(l.expandArrow);var l}(d)}),1e3)})();