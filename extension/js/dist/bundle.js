(()=>{"use strict";const e={tags:{start:"(",end:")",separator:";"},folder:{start:"[",end:"]",separator:";"}};function t(t){if(!t.includes(e.tags.start))return[];let n=t.split(e.tags.start);if(2!==n.length)return[];let o=n[1].split(e.tags.end);return 2!==o.length?[]:o[0].split(e.tags.separator)}function n(t){if(!t.includes(e.folder.start))return[];let n=t.split(e.folder.start);if(2!==n.length)return[];let o=n[1].split(e.folder.end);return 2!==o.length?[]:o[0].split(e.folder.separator)}function o(e){const o=e.children[0],r=o.children[0],s=r.children[0],l=r.children[1],d=s.children[0].children[0].children[0];return e.remove(),{inputValue:d.value,inputElement:d,expandArrow:l,firstDiv:o,container:r,element:e,tags:t(d.value),folder:n(d.value)}}function r(e,t){const n=e.indexOf(t);return n<0?e:e.splice(n,1)}function s(t){t.expandArrow.remove();const n=document.createElement("button");t.container.appendChild(n),t.container.appendChild(t.expandArrow),n.textContent="⚙",n.className="active:animate-spin",n.onclick=()=>{o.hidden=!o.hidden};const o=function(t,n){const o=document.createElement("div");o.hidden=!0,o.className="py-4 px-6";const r=document.createElement("span");o.appendChild(r),r.textContent="";let s="",d="";return o.appendChild(l("Please enter the folder:",(function(t){s=0==t.length?"":e.folder.start+t+e.folder.end,r.textContent=s+d}),e.folder.separator,t)),o.appendChild(l("Please enter the tags:",(function(t){d=0==t.length?"":e.tags.start+t+e.tags.end,r.textContent=s+d}),e.tags.separator,n)),o}(t.folder,t.tags);return t.firstDiv.appendChild(o),t}function l(e,t,n,o){const r=document.createElement("div"),s=document.createElement("span");r.appendChild(s),s.textContent=e;const l=document.createElement("div");r.appendChild(l);const i=document.createElement("button");r.appendChild(i),i.textContent="+";const a=[],c=[];i.onclick=()=>{d(l,a,c,t,n,"")};for(const e of o)d(l,a,c,t,n,e);return r}function d(e,t,n,o,s,l){const d=document.createElement("div");e.appendChild(d),t.push(d);const i=document.createElement("button");d.appendChild(i),i.textContent="-";const a=document.createElement("input");function c(){let e="";return n.forEach((t=>{e+=t.value+s})),e=e.substring(0,e.length-1),e}d.appendChild(a),n.push(a),a.value=l,a.oninput=()=>{o(c())},i.onclick=()=>{d.remove(),r(t,d),r(n,a),o(c())}}class i{listParent;entries;folder;constructor(e,t){this.listParent=e,this.entries=t,this.folder={entries:[],subFolders:new Map},this.sortEntries();for(const e of this.folder.subFolders)this.addFolders(e[1],e[0],this.listParent);for(const e of this.folder.entries)this.listParent.appendChild(e.element)}sortEntries(){for(const e of this.entries){if(0==e.folder.length){this.folder.entries.push(e);continue}let t=this.folder;for(const n of e.folder){const o=t.subFolders.get(n);if(void 0!==o)o.entries.push(e),t=o;else{const o={entries:[e],subFolders:new Map};t.subFolders.set(n,o),t=o}}}}addFolders(e,t,n){const o=document.createElement("li");n.appendChild(o),o.className="pt-6";const r=document.createElement("div");o.appendChild(r);const s=document.createElement("div");r.appendChild(s),s.className="p-2 flex flex-row";const l=document.createElement("button");s.appendChild(l),l.textContent="➕",l.onclick=()=>{i.hidden=!i.hidden,l.textContent=i.hidden?"➕":"➖"},l.className="w-6";const d=document.createElement("div");s.appendChild(d),d.textContent=t;const i=document.createElement("div");r.appendChild(i),i.hidden=!0,i.className="";const a=document.createElement("ul");i.appendChild(a),a.className="border-l-2 pl-2 ml-7";for(const t of e.entries)a.appendChild(t.element);for(const t of e.subFolders)this.addFolders(t[1],t[0],a)}}!function(){console.log("foo");const e=function(){const e=document.getElementsByTagName("ul");for(const t of e){const e=t.children,n=[];for(const t of e)"LI"===t.tagName&&t.id.endsWith("mozmail.com")&&"AliasList_alias-card-wrapper__a_ZUO"===t.className&&n.push(t);if(n.length>0)return{children:n,parent:t}}return null}();if(null===e)return;const t=[];for(const n of e.children)t.push(o(n));new i(e.parent,t);for(const e of t)s(e)}()})();