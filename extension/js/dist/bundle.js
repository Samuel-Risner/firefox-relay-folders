(()=>{"use strict";const e={tags:{start:"(",end:")",separator:";"},folder:{start:"[",end:"]",separator:";"}};function t(t){if(!t.includes(e.tags.start))return[];let n=t.split(e.tags.start);if(2!==n.length)return[];let r=n[1].split(e.tags.end);return 2!==r.length?[]:r[0].split(e.tags.separator)}function n(t){if(!t.includes(e.folder.start))return[];let n=t.split(e.folder.start);if(2!==n.length)return[];let r=n[1].split(e.folder.end);return 2!==r.length?[]:r[0].split(e.folder.separator)}function r(e){const r=e.children[0].children[0],s=r.children[0],o=r.children[1],l=s.children[0].children[0].children[0];return{inputValue:l.value,inputElement:l,expandArrow:o,container:r,element:e,tags:t(l.value),folder:n(l.value)}}function s(e){e.element.remove(),e.expandArrow.remove();const t=document.createElement("button");return e.container.appendChild(t),t.textContent="⚙",e.container.appendChild(e.expandArrow),e}class o{listParent;entries;folder;constructor(e,t){this.listParent=e,this.entries=t,this.folder={entries:[],subFolders:new Map},this.sortEntries();for(const e of this.folder.subFolders)this.addFolders(e[1],e[0],this.listParent);for(const e of this.folder.entries)this.listParent.appendChild(e.element)}sortEntries(){for(const e of this.entries){if(0==e.folder.length){this.folder.entries.push(e);continue}let t=this.folder;for(const n of e.folder){const r=t.subFolders.get(n);if(void 0!==r)r.entries.push(e),t=r;else{const r={entries:[e],subFolders:new Map};t.subFolders.set(n,r),t=r}}}}addFolders(e,t,n){const r=document.createElement("li");n.appendChild(r),r.className="pt-6";const s=document.createElement("div");r.appendChild(s);const o=document.createElement("div");s.appendChild(o),o.className="p-2 flex justify-between";const l=document.createElement("div");o.appendChild(l),l.textContent=t;const d=document.createElement("button");o.appendChild(d),d.textContent="➕",d.onclick=()=>{i.hidden=!i.hidden},d.className="order-last w-8";const i=document.createElement("div");s.appendChild(i),i.hidden=!0,i.className="";const a=document.createElement("ul");i.appendChild(a),a.className="border-l-2 pl-4 ml-4";for(const t of e.entries)a.appendChild(t.element);for(const t of e.subFolders)this.addFolders(t[1],t[0],a)}}!function(){console.log("foo");const e=function(){const e=document.getElementsByTagName("ul");for(const t of e){const e=t.children,n=[];for(const t of e)"LI"===t.tagName&&t.id.endsWith("mozmail.com")&&"AliasList_alias-card-wrapper__a_ZUO"===t.className&&n.push(t);if(n.length>0)return{children:n,parent:t}}return null}();if(null===e)return;const t=[];for(const n of e.children)t.push(s(r(n)));new o(e.parent,t)}()})();