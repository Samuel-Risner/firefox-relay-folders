(()=>{"use strict";const e={tags:{start:"(",end:")",separator:";"},folder:{start:"[",end:"]",separator:";"}};function t(t){if(!t.includes(e.tags.start))return[];let n=t.split(e.tags.start);if(2!==n.length)return[];let o=n[1].split(e.tags.end);return 2!==o.length?[]:o[0].split(e.tags.separator)}function n(t){if(!t.includes(e.folder.start))return[];let n=t.split(e.folder.start);if(2!==n.length)return[];let o=n[1].split(e.folder.end);return 2!==o.length?[]:o[0].split(e.folder.separator)}function o(e){const o=e.children[0],s=o.children[0],r=s.children[0],l=s.children[1],d=r.children[0].children[0].children[0];return e.remove(),{inputValue:d.value,inputElement:d,expandArrow:l,firstDiv:o,container:s,element:e,tags:t(d.value),folder:n(d.value)}}function s(e,t){const n=e.indexOf(t);return n<0?e:e.splice(n,1)}function r(t){t.expandArrow.remove();const n=document.createElement("button");t.container.appendChild(n),t.container.appendChild(t.expandArrow),n.textContent="⚙",n.className="active:animate-spin",n.onclick=()=>{o.hidden=!o.hidden};const o=function(t,n){const o=document.createElement("div");o.hidden=!0,o.className="border-t-[1px] p-6 pb-5";const s=document.createElement("span");o.appendChild(s),s.textContent="Please append this to the accounts name: ";const r=document.createElement("span");o.appendChild(r),r.textContent="";let d="",a="";return o.appendChild(l("Folder:",(function(t){d=0==t.length?"":e.folder.start+t+e.folder.end,r.textContent=d+a}),e.folder.separator,t)),o.appendChild(l("Tags:",(function(t){a=0==t.length?"":e.tags.start+t+e.tags.end,r.textContent=d+a}),e.tags.separator,n)),o}(t.folder,t.tags);return t.firstDiv.appendChild(o),t}function l(e,t,n,o){const s=document.createElement("div");s.className="flex flex-row pb-1";const r=document.createElement("div");s.appendChild(r),r.textContent=e,r.className="p-1";const l=document.createElement("div");s.appendChild(l),l.className="flex flex-row";const a=document.createElement("button");s.appendChild(a),a.textContent="➕",a.className="pl-2 py-1";const c=[],i=[];a.onclick=()=>{d(l,c,i,t,n,"")};for(const e of o)d(l,c,i,t,n,e);return s}function d(e,t,n,o,r,l){const d=document.createElement("div");e.appendChild(d),t.push(d),d.className="ml-2 bg-neutral-200 rounded-md p-1";const a=document.createElement("button");d.appendChild(a),a.textContent="❌";const c=document.createElement("input");function i(){let e="";return n.forEach((t=>{e+=t.value+r})),e=e.substring(0,e.length-1),e}d.appendChild(c),n.push(c),c.value=l,c.className="w-20 ml-2 bg-transparent",c.oninput=()=>{o(i())},a.onclick=()=>{d.remove(),s(t,d),s(n,c),o(i())}}class a{listParent;entries;folder;constructor(e,t){this.listParent=e,this.entries=t,this.folder={entries:[],subFolders:new Map},this.sortEntries();for(const e of this.folder.subFolders)this.addFolders(e[1],e[0],this.listParent);for(const e of this.folder.entries)this.listParent.appendChild(e.element)}sortEntries(){for(const e of this.entries){if(0==e.folder.length){this.folder.entries.push(e);continue}let t=this.folder;for(const n of e.folder){const o=t.subFolders.get(n);if(void 0!==o)o.entries.push(e),t=o;else{const o={entries:[e],subFolders:new Map};t.subFolders.set(n,o),t=o}}}}addFolders(e,t,n){const o=document.createElement("li");n.appendChild(o),o.className="pt-6";const s=document.createElement("div");o.appendChild(s);const r=document.createElement("div");s.appendChild(r),r.className="p-2 flex flex-row";const l=document.createElement("button");r.appendChild(l),l.textContent="➕",l.onclick=()=>{a.hidden=!a.hidden,l.textContent=a.hidden?"➕":"➖"},l.className="w-6";const d=document.createElement("div");r.appendChild(d),d.textContent=t;const a=document.createElement("div");s.appendChild(a),a.hidden=!0,a.className="";const c=document.createElement("ul");a.appendChild(c),c.className="border-l-2 pl-2 ml-7";for(const t of e.entries)c.appendChild(t.element);for(const t of e.subFolders)this.addFolders(t[1],t[0],c)}}!function(){console.log("foo");const e=function(){const e=document.getElementsByTagName("ul");for(const t of e){const e=t.children,n=[];for(const t of e)"LI"===t.tagName&&t.id.endsWith("mozmail.com")&&"AliasList_alias-card-wrapper__a_ZUO"===t.className&&n.push(t);if(n.length>0)return{children:n,parent:t}}return null}();if(null===e)return;const t=[];for(const n of e.children)t.push(o(n));new a(e.parent,t);for(const e of t)r(e)}()})();