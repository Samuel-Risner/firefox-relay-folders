(()=>{"use strict";const e={tags:{start:"(",end:")",separator:";"},folder:{start:"[",end:"]",separator:";"}};function t(t){if(!t.includes(e.tags.start))return[];let n=t.split(e.tags.start);if(2!==n.length)return[];let o=n[1].split(e.tags.end);return 2!==o.length?[]:o[0].split(e.tags.separator)}function n(t){if(!t.includes(e.folder.start))return[];let n=t.split(e.folder.start);if(2!==n.length)return[];let o=n[1].split(e.folder.end);return 2!==o.length?[]:o[0].split(e.folder.separator)}function o(e){const o=e.children[0].children[0],r=o.children[0],s=o.children[1],l=r.children[0].children[0].children[0];return{inputValue:l.value,inputElement:l,expandArrow:s,container:o,element:e,tags:t(l.value),folder:n(l.value)}}function r(e){e.element.remove(),e.expandArrow.remove();const t=document.createElement("button");return e.container.appendChild(t),t.textContent="⚙",e.container.appendChild(e.expandArrow),e}class s{listParent;entries;folder;constructor(e,t){this.listParent=e,this.entries=t,this.folder={entries:[],subFolders:new Map},this.sortEntries();for(const e of this.folder.subFolders)this.addFolders(e[1],e[0],this.listParent);for(const e of this.folder.entries)this.listParent.appendChild(e.element)}sortEntries(){for(const e of this.entries){if(0==e.folder.length){this.folder.entries.push(e);continue}let t=this.folder;for(const n of e.folder){const o=t.subFolders.get(n);if(void 0!==o)o.entries.push(e),t=o;else{const o={entries:[e],subFolders:new Map};t.subFolders.set(n,o),t=o}}}}addFolders(e,t,n){console.log(e),console.log(t),console.log(e.entries);const o=document.createElement("li");n.appendChild(o);const r=document.createElement("div");o.appendChild(r);const s=document.createElement("div");r.appendChild(s);const l=document.createElement("div");s.appendChild(l),l.textContent=t;const i=document.createElement("button");s.appendChild(i),i.textContent="➕",i.onclick=()=>{d.hidden=!d.hidden};const d=document.createElement("div");r.appendChild(d),d.hidden=!0;const c=document.createElement("ul");d.appendChild(c);for(const t of e.entries)c.appendChild(t.element);for(const t of e.subFolders)this.addFolders(t[1],t[0],c)}}!function(){console.log("foo");const e=function(){const e=document.getElementsByTagName("ul");for(const t of e){const e=t.children,n=[];for(const t of e)"LI"===t.tagName&&t.id.endsWith("mozmail.com")&&"AliasList_alias-card-wrapper__a_ZUO"===t.className&&n.push(t);if(n.length>0)return{children:n,parent:t}}return null}();if(console.log(e),null===e)return;const t=[];for(const n of e.children)t.push(r(o(n)));new s(e.parent,t)}()})();